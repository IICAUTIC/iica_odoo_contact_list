<odoo>
  <data>
    <menuitem name="IICA Contacts" id="iica_contacts_menu"
        parent="mass_mailing.mass_mailing_menu_root" sequence="0" groups="mass_mailing.group_mass_mailing_user"/>

    <!--Contact search-->
    <record model="ir.ui.view" id="view_iica_contacts_contact_search">
        <field name="name">iica_contacts.contact.search</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
           <search string="IICA Contacts">
                <field name="name"/>
                <field name="email"/>
                <field name="country_id"/>
                <field name="company"/>
                <field name="language"/>
                <separator/>
                <filter string="Exclude Opt Out" name="not_opt_out" domain="[('opt_out', '=', False)]"/>
                <group expand="0" string="Group By">
                    <filter string="Creation Date" name="group_create_date"
                        context="{'group_by': 'create_date'}"/>
                    <filter string="Place of work" name="group_company"
                        context="{'group_by': 'company'}"/>
                </group>
            </search>
        </field>
    </record>

    <!--Contact form view-->
    <record model="ir.ui.view" id="view_iica_contacts_contact_form">
        <field name="name">iica_contacts.contact.form</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
            <form string="Contact">
                <sheet>
                    <div class="oe_title">
                      <h1><field name="name" placeholder="Full Name"/></h1>
                    </div>
                    <group col="2">
                      <group string="Location properties">
                        <field name="country_id" options="{'no_create': True}"/>
                        <field name="company"/>
                        <field name="sector"/>
                        <field name="language"/>
                      </group>
                      <group string="Contact properties">
                        <field name="email"/>
                        <field name="phone"/>
                        <field name="opt_out"/>
                        <field name="unsubscription_date" readonly="1"/>
                      </group>
                    </group>
                    <notebook>
                      <page string="Products of interest">
                        <field name="product_interest_ids" options="{'no_create': True}"/>
                      </page>
                      <page string="Areas of interest">
                        <field name="area_interest_ids" options="{'no_create': True}"/>
                      </page>
                      <page string="Topics of interest">
                        <field name="topic_interest_ids" options="{'no_create': True}"/>
                      </page>                      
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <!--Contact tree view-->
    <record model="ir.ui.view" id="view_iica_contacts_contact_tree">
        <field name="name">iica_contacts.contact.tree</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
            <tree string="Mailing Lists Subscribers">
                <field name="email_formatted"/>
                <field name="company"/>
                <field name="unsubscription_date"/>
            </tree>
        </field>
    </record>
    <!-- Contact Action -->
    <record model="ir.actions.act_window" id="action_view_iica_contacts_contacts">
        <field name="name">IICA Contact list</field>
        <field name="res_model">iica_contacts.contact</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <!-- <field name="context">{'search_default_not_opt_out': 1}</field> -->
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">Create the first contact
            </p>
        </field>
    </record>
    <!-- Menu item that triggers IICA Contacts action -->
    <menuitem id="iica_contacts_management_menu" name="Manage contacts" parent="iica_contacts_menu"
              action="action_view_iica_contacts_contacts"/>
  </data>
</odoo>
