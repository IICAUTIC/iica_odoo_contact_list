<odoo>
  <data>
    <menuitem name="IICA Contacts" id="iica_contacts_menu"
        parent="mass_mailing.mass_mailing_menu_root" sequence="0" groups="mass_mailing.group_mass_mailing_user"/>

    <!--Contact search-->
    <record model="ir.ui.view" id="view_iica_contacts_contact_search">
        <field name="name">iica_contacts.contact.search</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
           <search string="IICA Contacts">
                <field name="name"/>
                <field name="email"/>
                <field name="country_id"/>
                <field name="company"/>
                <field name="language"/>
                <separator/>
                <filter string="Exclude Opt Out" name="not_opt_out" domain="[('opt_out', '=', False)]"/>
                <group expand="0" string="Group By">
                    <filter string="Creation Date" name="group_create_date"
                        context="{'group_by': 'create_date'}"/>
                    <filter string="Place of work" name="group_company"
                        context="{'group_by': 'company'}"/>
                    <filter string="Works in radio" name="group_radio"
                        context="{'group_by': 'radio'}"/>
                </group>
            </search>
        </field>
    </record>

    <!--Journalist search-->
    <record model="ir.ui.view" id="view_iica_contacts_journalist_search">
        <field name="name">iica_contacts.journalist.search</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
           <search string="IICA Journalists">
                <field name="name"/>
                <field name="email"/>
                <field name="country_id"/>
                <field name="company"/>
                <field name="language"/>
                <group expand="0" string="Group By">
                    <filter string="Creation Date" name="group_create_date"
                        context="{'group_by': 'create_date'}"/>
                    <filter string="Place of work" name="group_company"
                        context="{'group_by': 'company'}"/>
                </group>
            </search>
        </field>
    </record>

    <!--Contact form view-->
    <record model="ir.ui.view" id="view_iica_contacts_contact_form">
        <field name="name">iica_contacts.contact.form</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
            <form string="Contact">
                <sheet>
                    <div class="oe_title">
                      <h1><field name="name" placeholder="Full Name"/></h1>
                    </div>
                    <group col="2">
                      <group string="Location properties">
                        <field name="contact_type" default="0"/>
                        <field name="country_id" options="{'no_create': True}"/>
                        <field name="company"/>
                        <field name="sector"/>
                        <field name="language"/>
                      </group>
                      <group string="Contact properties">
                        <field name="email"/>
                        <field name="phone"/>
                        <field name="radio"/>
                        <field name="opt_out"/>
                        <field name="unsubscription_date" readonly="1"/>
                      </group>
                    </group>
                    <notebook>
                      <page string="Products of interest">
                        <field name="product_interest_ids" options="{'no_create': True}"/>
                      </page>
                      <page string="Areas of interest">
                        <field name="area_interest_ids" options="{'no_create': True}"/>
                      </page>
                      <page string="Topics of interest">
                        <field name="topic_interest_ids" options="{'no_create': True}"/>
                      </page>
                      <page string="Additional products">
                        <field name="additional_products_ids" options="{'no_create': True}"/>
                      </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <!--Journalist form view-->
    <record model="ir.ui.view" id="view_iica_contacts_journalist_form">
        <field name="name">iica_contacts.journalist.form</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
            <form string="Journalist">
                <sheet>
                    <div class="oe_title">
                      <h1><field name="name" placeholder="Full Name"/></h1>
                    </div>
                    <group col="2">
                      <group string="General information">
                        <field name="contact_type" default="1"/>
                        <field name="country_id" options="{'no_create': True}"/>
                        <field name="company"/>
                        <field name="position"/>
                        <field name="language"/>
                      </group>
                      <group string="Contact information">
                        <field name="email"/>
                        <field name="phone"/>
                        <field name="extension" />
                        <field name="mobile_phone"/>
                        <field name="opt_out"/>
                        <field name="unsubscription_date" readonly="1"/>
                      </group>
                    </group>
                    <notebook>
                      <page string="Topics and Channels">
                        <group col="2">
                            <group string="Channels">
                                <field name="channels" widget="many2many_checkboxes"/>
                            </group>
                            <group string="Topics">
                                <field name="topics" widget="many2many_checkboxes"/>
                            </group>
                        </group>                                                
                      </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <!--Contact tree view-->
    <record model="ir.ui.view" id="view_iica_contacts_contact_tree">
        <field name="name">iica_contacts.contact.tree</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
            <tree string="Mailing Lists Subscribers">
                <field name="email_formatted"/>
                <field name="company"/>
                <field name="unsubscription_date"/>
            </tree>
        </field>
    </record>
    <!--Journalist tree view-->
    <record model="ir.ui.view" id="view_iica_contacts_journalist_tree">
        <field name="name">iica_contacts.journalist.tree</field>
        <field name="model">iica_contacts.contact</field>
        <field name="arch" type="xml">
            <tree string="Journalists">
                <field name="name" />
                <field name="email_formatted"/>
                <field name="company"/>
            </tree>
        </field>
    </record>
    <!-- Contact Action -->
    <record model="ir.actions.act_window" id="action_view_iica_contacts_contacts">
        <field name="name">IICA Contact list</field>
        <field name="res_model">iica_contacts.contact</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">Create the first contact
            </p>
        </field>
    </record>
    <!-- Journalist Actions -->
    <record model="ir.actions.act_window" id="action_view_iica_contacts_journalist">
        <field name="name">IICA Journalist list</field>
        <field name="res_model">iica_contacts.contact</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'default_contact_type': '1'}</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">Create the first journalist
            </p>
        </field>
    </record>
    <record id="view_action_iica_contacts_journalist_tree" model="ir.actions.act_window.view">
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_iica_contacts_journalist_tree"/>
        <field name="act_window_id" ref="action_view_iica_contacts_journalist" />
    </record>
    <record id="view_action_iica_contacts_journalist_form" model="ir.actions.act_window.view">
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_iica_contacts_journalist_form"/>
        <field name="act_window_id" ref="action_view_iica_contacts_journalist" />
    </record>

    <!-- Menu item that triggers IICA Contacts action -->
    <menuitem id="iica_contacts_management_menu" name="Manage contacts" parent="iica_contacts_menu"
              action="action_view_iica_contacts_contacts"/>
    <!-- Menu item that triggers IICA Journalists action -->
    <menuitem id="iica_journalists_management_menu" name="Manage journalists" parent="iica_contacts_menu"
              action="action_view_iica_contacts_journalist"/>
  </data>
</odoo>
